# Инструкция по созданию сайта для исследования семантики цветового зрения
## Пара слов о том, кому это может пригодиться
* Небольшой компании, которая хочет придумать себе логотип, и хочет, чтобы этот логотип передавал определенный смысл
(например, птица счастья - то есть птица цвета ультрамарин), как раз для того, чтобы понять, какой цвет ваши сотрудники воспринимают как ультрамарин, вам может пригодиться провести исследование семантики их цветового зрения
* Любому человеку, кто хочет понимать, какой RGB соответствует какому цвету в голове его близких(например, если ваша жена скажет, что хочет
сиреневое платье, то вы посмотрите на результаты исследования и увидете, какой цвет в RGB она считает сиреневым, затем без труда закажите платье нужного цвета)
* Тому, кто хочет написать свой сайт и столкнулся с какой-то проблемой, я постаралась расписать как у меня все работает, чтобы можно было по такой же лоогике использовать для создания другого сайта
## Описание исследования
Начальная страница, на которой предсавлены правила прохождения исследования.
![Описание](https://github.com/Anastasia326/ColorResearchSite/blob/master/img_site/%D0%9E%D0%BF%D0%B8%D1%81%D0%B0%D0%BD%D0%B8%D0%B5.png)
Форма для сбора данных для аналитики(без персональных данных)
![Форма](https://github.com/Anastasia326/ColorResearchSite/blob/master/img_site/%D0%A4%D0%BE%D1%80%D0%BC%D0%B0.png)
![Форма_с_ответом](https://github.com/Anastasia326/ColorResearchSite/blob/master/img_site/%D0%A4%D0%BE%D1%80%D0%BC%D0%B0_%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0.png)
Когда человек нажал выбрать цве, появляются круги с уветами, близко расположенными с данным цветом(в представлении разработчика). Затем человек выбирает какой-то из цветов, нажимает, и все цвета изменяются в зависимости от того, какоф цвет был выбран(как изменяются смотрите в конце инструкции).
![цвета_начало](https://github.com/Anastasia326/ColorResearchSite/blob/master/img_site/%D1%86%D0%B2%D0%B5%D1%82%D0%B0%20%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE.png)
Вот так выглядит промежуточный шаг выбора цвета.
![цвета](https://github.com/Anastasia326/ColorResearchSite/blob/master/img_site/%D1%86%D0%B2%D0%B5%D1%82%D0%B0.png)
После того, как человек сиал уверен, что он нашел нужный цвет(этот цвет в центре), он нажимает на центр, и ему показывается прогресс.
![прогресс](https://github.com/Anastasia326/ColorResearchSite/blob/master/img_site/%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B5%D1%81%D1%81.png)
В конце исследования, после определения всех цветов показывается надпись
![финал](https://github.com/Anastasia326/ColorResearchSite/blob/master/img_site/%D1%84%D0%B8%D0%BD%D0%B0%D0%BB.png)
Так же есть страница с результатами, изначально на ней ничего нет, после завершения исследования можно разместить результаты - графики, зависимости и т.д.
![результаты](https://github.com/Anastasia326/ColorResearchSite/blob/master/img_site/%D1%80%D0%B5%D0%B7%D1%83%D0%BB%D1%8C%D1%82%D0%B0%D1%82%D1%8B.png)


## Описание структуры проекта
requirements - в нем прописаны все библиотеки и фреймворки, которые используются в проекте - установите все из него   
settings.py - в нем прописаны настройки сайта, стоит изменить под себя при разработке  
views.py - собственно логика или backend сайта  
templates - папка с html  
about.html - для страницы "Об исследовании"  
base.html - шаблон для всех страниц(меню и фоны)  
index.html - для начальной страницы с формой сбора данных  
map.html - для исследования(сами кружочки)  
results.html - для страницы результатов, в начале там только ожидание результатов, потом можете добавить сами результаты или вообще удалить эту страницу  
css/main.css - все стили(в коде есть комментарии к каждой строке)  
js/script.js - скрипт для логики для клиента, так же есть для каждого действия комментарии  
js/cookie.js - сторониий скрипт для использования куки в JavaScript  
img - картинки(у меня их две - для иконки сайта и для ждуна в результатах исследования)  
forms.py - форма для пользователя (возраст, город, пол, профессия, дальтонизм), и для хранения шагов пользователй  
models.py - модель данных так же для данных пользователя и цветов  
## Как изменить под ваше исследование
__Сразу отмечу, что я не объясняю зачем нужны базовые строки, так как есть люди, которые уже это сделали лучше меня), можете посмотреть вот [тут](https://www.youtube.com/watch?v=L-FyeHQwo4U&list=PLDyJYA6aTY1nZ9fSGcsK4wqeu-xaJksQQ), если есть какие-то ошибки с базовой структурой сайта__  
Возможно(скорее точно), вам стоит переделать models и forms, чтобы у вас не было куча одинаковых таблиц, а была одна, но с индексами, например. Мне было проще для понимания сделать много одинаковых.  
1. В settings.py в ALLOWED_HOSTS пропишите те хосты, на котороых хотите, чтобы крутился ваш сайт
2. html, цвета, стили и т.д. можно менять под себя, я расписала в css комментарии, для чего именно сделал каждый стиль
3. views.py 
У меня вся логика взаимодействия фронта с беком построена на куки и на ajax. Через куки я передаю переменные, важные для логики программы(id пользователя, нынешний цвет), с помощью ajax я передаю в БД действия пользователя при выборе цвета.  
```python
if not request.COOKIES.get('id'):
        # Запоминаем id user-a
        request.COOKIES['id'] = id
        html = redirect('map')
        html.set_cookie('id', id)
    # Если пользователь еще не заполнил данные
    if not request.COOKIES.get('logged_in'):
        if request.method == 'POST':
            # Записываем в БД данные пользователя
            user_info = UserInfo(id=str(id))
            form = UserInfoForm(request.POST, instance=user_info)
            if form.is_valid():
                form.save()
                # Запоминаем, что он заполнил данные
                request.COOKIES['logged_in'] = True
                html.set_cookie('logged_in', True)
                # ренаправляем на исследование - map
                return html
```
4. js/script.js  
В начале файла у меня указан список цветов, вам стоит только заменить его на свои цвета и выбрать стартовые координаты для цвета. Стартовая координата это цвет, который отдаленно напоминает нужный цвет9в вашем представлении), но не абсолютно близок к нему. То есть для белого,условно, не стоит брать (250,250,250), так как тогда у пользователя почти не будет шагов, стоит выбрать что-то а-ля (200,200,200).  
Затем происходит сокрытие и показ кнопок в нужное время, расскрашивание кругов происходит с помощью функции changeColor(color_chose, isStart), где color_chose это цвет, на который нажал пользователь, если это не начало, или эьто ваш стартовый цвет, если начало.  
Логика измнения цвета, который в коде выглядит как 3 if следующая:
![Coordinates](https://github.com/Anastasia326/ColorResearchSite/blob/master/img_site/shema.png)
![Shema](https://github.com/Anastasia326/ColorResearchSite/blob/master/img_site/coordinats.png)
# Результаты
Результаты представлены в ноутбуке Results_research.ipynb      
Если он не открывается в браузере, то попробуйте через https://translated.turbopages.org/proxy_u/en-ru.ru.540313d7-64778fdb-1a5ed8de-74722d776562/https/nbviewer.org/, просто вставьте ссылку на ноутбук
